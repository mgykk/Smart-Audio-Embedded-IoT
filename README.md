# 智能音响

## 音乐播放器设计

智能音响需要做的三件事：

1. 播放音乐
2. 监听按键（读取设备文件，文件描述符）
3. 监听网络（文件描述符）

通过三个进程进行实现：

- 父进程：Select监听按键与网络
- 子进程：Wait等待孙进程结束
- 孙进程：播放音乐

进程间通信方式：共享内存

共享内存中存放1.进程号；2.当前播放音乐；3.播放模式。

数据存储结构：链表，将U盘所有歌曲名称取出存放进双向链表中。

按键功能：

1. 暂停：父进程给子进程与孙进程发送SIGSTOP；
2. 继续：父进程给子进程与孙进程发送SIGCONT；
3. 上一首：获取当前播放音乐，遍历链表，找到上一首，杀死子进程与孙进程，重新启动播放音乐；
4. 播放模式。